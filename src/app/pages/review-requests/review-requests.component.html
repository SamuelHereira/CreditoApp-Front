<app-navbar></app-navbar>

<div class="w-max mx-auto mt-4">
  <select
    [(ngModel)]="statusSelected"
    (change)="getRequests(statusSelected)"
    class="mb-4 px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-500 w-50"
  >
    <option value="" [selected]="!statusSelected">Todos</option>
    <option
      *ngFor="let status of statuses"
      [value]="status.value"
      [selected]="statusSelected === status.value"
    >
      {{ status.label }}
    </option>
  </select>
  <app-table
    [data]="requests"
    [columns]="columns"
    [paginationEnabled]="true"
    [pageSize]="5"
  ></app-table>
</div>

<ng-template #statusTemplate let-value="value">
  <span
    class="text-xs font-medium px-2 py-1 rounded-full"
    [ngClass]="{
      'bg-green-100 text-green-800': value === 'Approved',
      'bg-yellow-100 text-yellow-800': value === 'Pending',
      'bg-red-100 text-red-800': value === 'Rejected'
    }"
  >
    {{
      value === "Approved"
        ? "Aprobada"
        : value === "Pending"
        ? "Pendiente"
        : "Rechazada"
    }}
  </span>
</ng-template>

<ng-template #actionsTemplate let-row="row">
  <button (click)="viewDetails(row.id)" class="text-blue-600 hover:underline">
    Ver Detalles
  </button>
</ng-template>
